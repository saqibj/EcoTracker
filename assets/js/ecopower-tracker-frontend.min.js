!function(e){"use strict";function t(){e.fn.tooltip&&e('[data-toggle="tooltip"]').tooltip(),e(".ecopower-accordion-header").on("click",function(){e(this).toggleClass("active").next(".ecopower-accordion-content").slideToggle()}),e(".ecopower-tabs-nav a").on("click",function(t){t.preventDefault();const o=e(this).attr("href");e(this).addClass("active").parent().siblings().find("a").removeClass("active"),e(o).addClass("active").siblings(".ecopower-tab-content").removeClass("active")})}e(document).ready(function(){e.fn.tooltip&&e('[data-toggle="tooltip"]').tooltip(),e(".ecopower-filter-form").on("submit",function(o){o.preventDefault();const r=e(this),n=r.closest(".ecopower-projects-grid"),a=e('<div class="ecopower-loader">Loading...</div>');n.append(a);const c=r.serialize();let i=window.location.href.split("?")[0];c&&(i+="?"+c),window.history.pushState({},"",i),e.ajax({url:ecopowerTracker.ajaxurl,type:"POST",data:{action:"ecopower_tracker_filter_projects",nonce:ecopowerTracker.nonce,form_data:c},success:function(e){e.success?(n.html(e.data.html),t()):alert("Error loading projects. Please try again.")},error:function(){alert("Error loading projects. Please try again.")},complete:function(){a.remove()}})}),e(document).on("click",".ecopower-pagination a",function(o){o.preventDefault();const r=e(this).attr("href"),n=e(".ecopower-projects-grid"),a=e('<div class="ecopower-loader">Loading...</div>');n.append(a),e.ajax({url:r,type:"GET",success:function(o){const r=e(o).find(".ecopower-projects-grid").html();n.html(r),t(),e("html, body").animate({scrollTop:n.offset().top-20},500)},error:function(){alert("Error loading page. Please try again.")},complete:function(){a.remove()}})}),t()}),window.onpopstate=function(){window.location.reload()}}(jQuery);
